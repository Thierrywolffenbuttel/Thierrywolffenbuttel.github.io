<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Snussykris</title>
      <link rel="icon" type="image/x-icon" href="favicon.ico" />
      <style>
         body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            background-color: white;
            color: black;
            background-image: url('background-image.jpg');
            background-repeat: repeat;
            background-size: 200px auto;
         }

         .content-container {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
         }

         .timer-container {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 10px;
            min-width: 280px;
         }

         .timer-row {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 8px;
         }

         .timer-row .label {
            font-size: 3vw;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px;
            border-radius: 5px;
            margin-right: 10px;
            margin-bottom: 0;
         }

         .timer {
            font-size: 7vw;
            width: auto;
            text-align: center;
            background: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 10px;
         }

         .side-image {
            width: clamp(100px, 25vw, 200px);
            height: auto;
            margin: 10px;
         }

         .bottom-image {
            width: clamp(80px, 20vw, 180px);
            height: auto;
            cursor: pointer;
            margin: 20px 0;
         }

         .label-static {
            font-size: 3vw;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.8);
            padding: 5px;
            border-radius: 5px;
         }

         #gameContainer {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            flex-direction: column;
         }

         #gameCanvas {
            background: black;
            max-width: 100%;
            max-height: 90vh;
            touch-action: none;
         }

         #controls {
            display: none;
            width: 100%;
            max-width: 300px;
            padding: 10px;
            margin-top: 15px;
         }

         .control-row {
            display: flex;
            justify-content: center;
            align-items: center;
         }

         .control-btn {
            width: 70px;
            height: 70px;
            margin: 5px;
            font-size: 28px;
            background: rgba(255, 255, 255, 0.7);
            border: none;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
         }

         #closeBtn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 12px 18px;
            background: rgba(255, 255, 255, 0.7);
            border: none;
            border-radius: 5px;
            font-size: 18px;
            cursor: pointer;
         }

         @media (max-width: 768px) {
            html,
            body {
               display: flex;
               overflow: hidden;
               flex-direction: column;
               justify-content: flex-start;
               align-items: center;
            }

            .content-container {
               flex-direction: column;
               margin-bottom: 2px;
               padding: 5px;
            }

            .timer-container {
               padding: 2px;
               min-width: 250px;
            }

            .timer {
               font-size: clamp(16px, 5vw, 40px);
               padding: 5px;
               margin-bottom: 5px;
               width: auto;
            }

            .timer-row {
               flex-direction: column;
               align-items: center;
            }

            .timer-row .label {
               font-size: clamp(12px, 2.5vw, 24px);
               margin-bottom: 4px;
               padding: 3px;
               margin-right: 0;
            }

            .label-static {
               font-size: clamp(12px, 2.5vw, 24px);
               margin-bottom: 5px;
               padding: 3px;
            }

            .side-image {
               width: clamp(70px, 22vw, 150px);
               margin: 2px;
            }

            .bottom-image {
               width: clamp(60px, 20vw, 140px);
               margin: 5px 0;
            }

            #controls {
               display: block;
            }

            .control-btn {
               width: 55px;
               height: 55px;
               margin: 3px;
               font-size: 24px;
            }
         }
      </style>
   </head>
   <body>
      <div class="content-container">
         <img class="side-image" src="left-image.png" alt="Left Side Image" />
         <div class="timer-container">
            <div class="timer-row">
               <div class="label">Time Kris has been nicotine-free:</div>
               <div class="timer" id="countUpTimer"></div>
            </div>
            <div class="timer-row">
               <div class="label">Time until Kris's next gift:</div>
               <div class="timer" id="countDownTimer"></div>
            </div>
         </div>
         <img class="side-image" src="right-image.png" alt="Right Side Image" />
      </div>
      <div class="label-static">I got bored, press on snake Kris and get Kris his snus:</div>
      <img class="bottom-image" src="bottom-image.png" alt="Play Snake" onclick="startGame()" />
  <script>
    // Chrome mobile 100vh fix
    function fixVhUnit() {
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', `${vh}px`);
    }

    window.addEventListener('load', fixVhUnit);
    window.addEventListener('resize', fixVhUnit);

    function updateCountUpTimer() {
      const startDate = new Date("April 8, 2025").getTime();
      function update() {
        const now = new Date().getTime();
        const elapsed = now - startDate;
        const days = Math.floor(elapsed / (1000 * 60 * 60 * 24));
        const hours = Math.floor((elapsed % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((elapsed % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((elapsed % (1000 * 60)) / 1000);
        document.getElementById("countUpTimer").innerText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
      }
      update();
      setInterval(update, 1000);
    }

    function updateCountDownTimer() {
      function update() {
        const now = new Date();
        let targetDate = new Date(now.getFullYear(), now.getMonth(), 8, 0, 0, 0);
        if (now.getDate() >= 8) targetDate.setMonth(targetDate.getMonth() + 1);
        const timeLeft = targetDate.getTime() - now.getTime();
        const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
        document.getElementById("countDownTimer").innerText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
      }
      update();
      setInterval(update, 1000);
    }

    window.onload = function () {
      updateCountUpTimer();
      updateCountDownTimer();
    };

    function startGame() {
      document.getElementById("gameContainer").style.display = "flex";
      initSnakeGame();
    }

    function closeGame() {
      document.getElementById("gameContainer").style.display = "none";
    }

    function initSnakeGame() {
      const canvas = document.getElementById("gameCanvas");
      const ctx = canvas.getContext("2d");

      function resizeCanvas() {
        const maxSize = Math.min(window.innerWidth * 0.95, window.innerHeight * 0.75);
        canvas.width = Math.min(500, maxSize);
        canvas.height = Math.min(500, maxSize);
      }

      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);

      const gridSize = 25;
      const box = canvas.width / gridSize;

      let snake = [{ x: 10 * box, y: 10 * box }];
      let direction = "RIGHT";
      let food = {
        x: Math.floor(Math.random() * gridSize) * box,
        y: Math.floor(Math.random() * gridSize) * box
      };
      let score = 0;

      const snakeImg = new Image();
      snakeImg.src = "snake-image.png";
      const foodImg = new Image();
      foodImg.src = "food-image.png";

      document.addEventListener("keydown", changeDirection);
      document.getElementById("upBtn").onclick = () => { if (direction !== "DOWN") direction = "UP"; };
      document.getElementById("downBtn").onclick = () => { if (direction !== "UP") direction = "DOWN"; };
      document.getElementById("leftBtn").onclick = () => { if (direction !== "RIGHT") direction = "LEFT"; };
      document.getElementById("rightBtn").onclick = () => { if (direction !== "LEFT") direction = "RIGHT"; };

      function changeDirection(event) {
        if (event.key === "ArrowUp" && direction !== "DOWN") direction = "UP";
        else if (event.key === "ArrowDown" && direction !== "UP") direction = "DOWN";
        else if (event.key === "ArrowLeft" && direction !== "RIGHT") direction = "LEFT";
        else if (event.key === "ArrowRight" && direction !== "LEFT") direction = "RIGHT";
      }

      canvas.addEventListener("touchstart", e => {
        touchStartX = e.touches[0].clientX;
        touchStartY = e.touches[0].clientY;
      });

      canvas.addEventListener("touchend", e => {
        const deltaX = e.changedTouches[0].clientX - touchStartX;
        const deltaY = e.changedTouches[0].clientY - touchStartY;
        if (Math.abs(deltaX) > Math.abs(deltaY)) {
          if (deltaX > 0 && direction !== "LEFT") direction = "RIGHT";
          else if (deltaX < 0 && direction !== "RIGHT") direction = "LEFT";
        } else {
          if (deltaY > 0 && direction !== "UP") direction = "DOWN";
          else if (deltaY < 0 && direction !== "DOWN") direction = "UP";
        }
      });

      function drawGame() {
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(foodImg, food.x, food.y, box, box);
        snake.forEach(segment => ctx.drawImage(snakeImg, segment.x, segment.y, box, box));

        ctx.fillStyle = "white";
        ctx.font = `${Math.max(14, canvas.width / 30)}px Arial`;
        ctx.fillText(`Score: ${score}`, 10, 20);

        let newHead = { ...snake[0] };
        if (direction === "UP") newHead.y -= box;
        else if (direction === "DOWN") newHead.y += box;
        else if (direction === "LEFT") newHead.x -= box;
        else if (direction === "RIGHT") newHead.x += box;

        if (Math.abs(newHead.x - food.x) < box * 0.5 && Math.abs(newHead.y - food.y) < box * 0.5) {
          score++;
          let newFoodPosition;
          do {
            newFoodPosition = {
              x: Math.floor(Math.random() * gridSize) * box,
              y: Math.floor(Math.random() * gridSize) * box
            };
          } while (snake.some(s => s.x === newFoodPosition.x && s.y === newFoodPosition.y));
          food = newFoodPosition;
        } else {
          snake.pop();
        }

        if (newHead.x < 0) newHead.x = canvas.width - box;
        if (newHead.x >= canvas.width) newHead.x = 0;
        if (newHead.y < 0) newHead.y = canvas.height - box;
        if (newHead.y >= canvas.height) newHead.y = 0;

        if (snake.some(s => s.x === newHead.x && s.y === newHead.y)) {
          alert(`Game Over! Your score: ${score}`);
          closeGame();
          clearInterval(gameLoop);
          return;
        }

        snake.unshift(newHead);
      }

      const gameLoop = setInterval(drawGame, 100);
      document.getElementById("closeBtn").onclick = () => {
        clearInterval(gameLoop);
        closeGame();
      };
    }
  </script>
</body>
</html>
